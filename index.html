<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CAUTION: CODE BREAKER</title>
    <script src="https://unpkg.com/peerjs@1.5.2/dist/peerjs.min.js"></script>
    <link rel="stylesheet" href="style.css">
</head>
<body>

    <div class="terminal-window">
        <h1 class="glitch">>> CODE_BREAKER_V3</h1>

        <div id="screen-menu" class="screen active">
            <p>>> INITIALIZE CONNECTION PROTOCOL</p>
            <button class="btn" onclick="hostGame()">[ HOST GAME ]</button>
            <p>>> OR CONNECT TO TARGET</p>
            <input type="tel" id="join-id" maxlength="6" placeholder="ENTER 6-DIGIT ID">
            <button class="btn btn-outline" onclick="joinGame()">[ JOIN ]</button>
        </div>

        <div id="screen-lobby" class="screen">
            <p>>> WAITING FOR UPLINK...</p>
            <p>SHARE COORDINATES:</p>
            <div class="id-display" onclick="copyId()">
                <span id="my-peer-id">GENERATING...</span>
            </div>
            <p id="lobby-status" class="blink">...LISTENING...</p>
            <button class="btn btn-small" onclick="location.reload()">[ ABORT ]</button>
        </div>

        <div id="screen-setup" class="screen">
            <p>>> SET DEFENSE PERIMETER</p>
            
            <div id="host-controls" class="hidden">
                <label>>> TIMER SETTING: <span id="timer-val">30s</span></label>
                <input type="range" id="timer-slider" min="10" max="60" value="30" step="5" oninput="document.getElementById('timer-val').innerText = this.value + 's'">
            </div>

            <p>ENTER 4-DIGIT SECRET:</p>
            <input type="tel" id="secret-input" maxlength="4" placeholder="0000">
            <button class="btn" id="lock-btn" onclick="lockInCode()">[ LOCK CODE ]</button>
            <p id="setup-msg"></p>
        </div>

        <div id="screen-game" class="screen">
            <div class="hud">
                <div id="turn-display">WAITING</div>
                <div id="timer-display">30</div>
            </div>
            
            <div id="input-area" class="disabled">
                <input type="tel" id="guess-input" maxlength="4" placeholder="____">
                <button class="btn" onclick="submitGuess()">[ EXECUTE ]</button>
            </div>

            <div class="console-log" id="history-feed">
                </div>
        </div>

        <div id="screen-end" class="screen">
            <h1 id="end-title">GAME OVER</h1>
            <p id="end-msg"></p>
            <button class="btn" id="rematch-btn" onclick="requestRematch()">[ REBOOT SYSTEM ]</button>
            <p id="rematch-status"></p>
        </div>
    </div>

    <script src="script.js"></script>
</body>
</html>
